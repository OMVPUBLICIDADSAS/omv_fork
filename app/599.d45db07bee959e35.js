"use strict";(self.webpackChunkquote_cli_01=self.webpackChunkquote_cli_01||[]).push([[599],{8599:(P,m,i)=>{i.r(m),i.d(m,{QuoteDocModule:()=>G});var h=i(6895),p=i(2510),g=i(9671),t=i(4650),f=i(2327),C=i(5822),y=i(8139),d=i(7009),b=i(4726),v=i(7392),_=i(2395),Z=i(2993);function T(n,l){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"div",11)(2,"div",12),t._uU(3),t.qZA(),t.TgZ(4,"mat-icon",13),t.NdJ("click",function(){const s=t.CHM(e).index,r=t.oxw();return t.KtG(r.deleteMPCOitem(s))}),t._uU(5,"delete"),t.qZA()()()}if(2&n){const e=l.$implicit;t.xp6(3),t.AsE(" ",e.key," - ",e.value," ")}}function x(n,l){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"app-cond-quote",14),t.NdJ("status",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.onStatus(o))}),t.qZA(),t._UZ(2,"hr"),t.qZA()}if(2&n){const e=l.$implicit;t.xp6(1),t.Q6J("condition",e)("edit",!0)}}const D=[{path:"",component:(()=>{class n{constructor(e,a,o,s){this.dg=e,this.httpGen=a,this.sharedvar=o,this.snkBar=s,this.quote_cond_list=[],this.settings={controls:[{name:"name",label:"Nombre de la empresa:",type:"text",style:"w-full",validators:{required:!0}},{name:"site",label:"Vinculo a la p\xe1gina:",type:"text",style:"w-full",validators:{required:!0}},{name:"phone",label:"Tel\xe9fono:",type:"text",validators:{required:!0}},{name:"address",label:"Direcci\xf3n corta:",type:"text",validators:{required:!0}},{name:"consecutive",label:"Consecutivo:",type:"number",validators:{required:!0}},{name:"p_iva",label:"Porcentaje de iva:",type:"number",validators:{required:!0}},{name:"notifMails",label:"Correos para notificar (separados por punto y coma ;):",type:"textarea",totalRows:2,style:"w-full",validators:{}}]}}ngOnInit(){this.sharedvar.general.quote_condition.length>0&&(this.quote_cond_list=JSON.parse(this.sharedvar.general.quote_condition))}addEditItemMPCO(){this.dg.aDefault({title:"C\xf3digo - T\xedtulo",value:{key:"CODIGO",value:"TITULO"},schema:{controls:[{name:"key",label:"C\xf3digo MARPICO:",type:"text",validators:{required:!0}},{name:"value",label:"T\xedtulo:",type:"text",style:"w-full",validators:{required:!0}}]},dgheigth:315,dgwidth:600}).subscribe(s=>{s&&(delete s._valid_,delete s._propName_,this.sharedvar.general.catagMARPICO.push(s),this.httpGen.updateGeneral(this.sharedvar.general).subscribe(r=>{}))})}deleteMPCOitem(e){var a=this;this.snkBar.open(`Eliminar ${this.sharedvar.general.catagMARPICO[e].key}-${this.sharedvar.general.catagMARPICO[e].value}`,"Continuar",{duration:3e3}).onAction().subscribe(function(){var o=(0,g.Z)(function*(s){a.sharedvar.general.catagMARPICO.splice(e,1),a.httpGen.updateGeneral(a.sharedvar.general).subscribe(r=>{})});return function(s){return o.apply(this,arguments)}}())}addCondition(){const e=this.newCondition("T\xedtulo");this.editAddCondition(e)}editAddCondition(e){const o=e.name||"";this.dg.aDefault({title:"Condiciones Comerciales",value:e,schema:{controls:[{name:"name",label:"T\xedtulo:",type:"text",style:{width:"150px"},validators:{required:!0}},{name:"detail",label:"Descripci\xf3n:",type:"textarea",style:"w-full",totalRows:6,validators:{}}]},dgheigth:600}).subscribe(r=>{if(r){const c=this.quote_cond_list.find(u=>u.name===o);c?(c.name=r.name,c.detail=r.detail):this.quote_cond_list.push({name:r.name,detail:r.detail}),this.sharedvar.general.quote_condition=JSON.stringify(this.quote_cond_list),this.httpGen.updateGeneral(this.sharedvar.general).subscribe(u=>{})}})}onStatus(e){switch(e.tag){case"edit":this.editAddCondition(e);break;case"delete":const a=this.quote_cond_list.findIndex(o=>o.name===e.name);a>=0&&(this.quote_cond_list.splice(a,1),this.sharedvar.general.quote_condition=JSON.stringify(this.quote_cond_list),this.httpGen.updateGeneral(this.sharedvar.general).subscribe(o=>{}))}}newCondition(e){return{name:e}}onGetData(e){e.name=e.name?.toUpperCase()||"",this.sharedvar.updatePropResult(this.sharedvar.general,e),!1!==e._valid_?this.httpGen.updateGeneral(this.sharedvar.general).subscribe(a=>{}):this.snkBar.open("Debe proporcionar la informaci\xf3n solicitada","Ok",{duration:3e3})}static#t=this.\u0275fac=function(a){return new(a||n)(t.Y36(f.x),t.Y36(C.g),t.Y36(y.m),t.Y36(d.ux))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-quote-doc"]],decls:22,vars:5,consts:[[1,"flex","flex-col","h-screen","bg-slate-100"],[3,"buttons"],[1,"overflow-auto","bg-white","p-2"],[3,"jsonFormData","values","result"],[1,"h-14","flex","justify-between","items-center","bg-white","border-y","border-gray-300","text-lg","text-red-900"],[1,"ml-2"],[1,"block","border","my-2","mr-2","p-2","hover:border-sky-900","hover:text-sky-900",3,"click"],[1,"mb-2"],[1,"mx-2","border","border-gray-300"],[4,"ngFor","ngForOf"],[1,"h-2"],[1,"flex"],[1,"grow"],[3,"click"],[3,"condition","edit","status"]],template:function(a,o){1&a&&(t.TgZ(0,"div",0),t._UZ(1,"app-nav-bar",1),t.TgZ(2,"div",2)(3,"app-dynamic-form",3),t.NdJ("result",function(r){return o.onGetData(r)}),t.qZA(),t.TgZ(4,"div",4)(5,"div",5),t._uU(6," Editar: Titulos MARPICO "),t.qZA(),t.TgZ(7,"span",6),t.NdJ("click",function(){return o.addEditItemMPCO()}),t.TgZ(8,"mat-icon"),t._uU(9,"add"),t.qZA()()(),t._UZ(10,"div",7),t.TgZ(11,"div",8),t.YNc(12,T,6,2,"div",9),t.qZA(),t._UZ(13,"div",10),t.TgZ(14,"div",4)(15,"div",5),t._uU(16," Editar: Condiciones comerciales "),t.qZA(),t.TgZ(17,"span",6),t.NdJ("click",function(){return o.addCondition()}),t.TgZ(18,"mat-icon"),t._uU(19,"add"),t.qZA()()(),t._UZ(20,"div",7),t.YNc(21,x,3,2,"div",9),t.qZA()()),2&a&&(t.xp6(1),t.Q6J("buttons","100000"),t.xp6(2),t.Q6J("jsonFormData",o.settings)("values",o.sharedvar.general),t.xp6(9),t.Q6J("ngForOf",o.sharedvar.general.catagMARPICO),t.xp6(9),t.Q6J("ngForOf",o.quote_cond_list))},dependencies:[h.sg,b.w,v.Hw,_.r,Z.y]})}return n})()}];let A=(()=>{class n{static#t=this.\u0275fac=function(a){return new(a||n)};static#e=this.\u0275mod=t.oAB({type:n});static#a=this.\u0275inj=t.cJS({imports:[p.Bz.forChild(D),p.Bz]})}return n})();var q=i(4859),O=i(9193),M=i(2469),Q=i(2355);let G=(()=>{class n{static#t=this.\u0275fac=function(a){return new(a||n)};static#e=this.\u0275mod=t.oAB({type:n});static#a=this.\u0275inj=t.cJS({imports:[h.ez,A,M.R,v.Ps,q.ot,d.ZX,O.N,Q.z,d.ZX]})}return n})()}}]);