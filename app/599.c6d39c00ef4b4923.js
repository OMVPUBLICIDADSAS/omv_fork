"use strict";(self.webpackChunkquote_cli_01=self.webpackChunkquote_cli_01||[]).push([[599],{8599:(N,u,n)=>{n.r(u),n.d(u,{QuoteDocModule:()=>A});var m=n(6895),h=n(2510),t=n(4650),v=n(2327),f=n(5822),g=n(8139),d=n(7009),y=n(4726),p=n(7392),b=n(2395),C=n(2993);function D(a,G){if(1&a){const e=t.EpF();t.TgZ(0,"div")(1,"app-cond-quote",9),t.NdJ("status",function(i){t.CHM(e);const s=t.oxw();return t.KtG(s.onStatus(i))}),t.qZA(),t._UZ(2,"hr"),t.qZA()}if(2&a){const e=G.$implicit;t.xp6(1),t.Q6J("condition",e)("edit",!0)}}const q=[{path:"",component:(()=>{class a{constructor(e,o,i,s){this.dg=e,this.httpGen=o,this.sharedvar=i,this.snkBar=s,this.quote_cond_list=[],this.settings={controls:[{name:"name",label:"Nombre de la empresa:",type:"text",style:"w-full",validators:{required:!0}},{name:"site",label:"Vinculo a la p\xe1gina:",type:"text",style:"w-full",validators:{required:!0}},{name:"phone",label:"Tel\xe9fono:",type:"text",validators:{required:!0}},{name:"address",label:"Direcci\xf3n corta:",type:"text",validators:{required:!0}},{name:"consecutive",label:"Consecutivo:",type:"number",validators:{required:!0}},{name:"p_iva",label:"Porcentaje de iva:",type:"number",validators:{required:!0}}]}}ngOnInit(){this.sharedvar.general.quote_condition.length>0&&(this.quote_cond_list=JSON.parse(this.sharedvar.general.quote_condition))}addCondition(){const e=this.newCondition("T\xedtulo");this.editAddCondition(e)}editAddCondition(e){const i=e.name||"";this.dg.aDefault({title:"Condiciones Comerciales",value:e,schema:{controls:[{name:"name",label:"T\xedtulo:",type:"text",style:{width:"150px"},validators:{required:!0}},{name:"detail",label:"Descripci\xf3n:",type:"textarea",style:"w-full",totalRows:6,validators:{}}]},dgheigth:600}).subscribe(r=>{if(r){const l=this.quote_cond_list.find(c=>c.name===i);l?(l.name=r.name,l.detail=r.detail):this.quote_cond_list.push({name:r.name,detail:r.detail}),this.sharedvar.general.quote_condition=JSON.stringify(this.quote_cond_list),this.httpGen.updateGeneral(this.sharedvar.general).subscribe(c=>{})}})}onStatus(e){switch(e.tag){case"edit":this.editAddCondition(e);break;case"delete":const o=this.quote_cond_list.findIndex(i=>i.name===e.name);o>=0&&(this.quote_cond_list.splice(o,1),this.sharedvar.general.quote_condition=JSON.stringify(this.quote_cond_list),this.httpGen.updateGeneral(this.sharedvar.general).subscribe(i=>{}))}}newCondition(e){return{name:e}}onGetData(e){e.name=e.name?.toUpperCase()||"",this.sharedvar.updatePropResult(this.sharedvar.general,e),!1!==e._valid_?this.httpGen.updateGeneral(this.sharedvar.general).subscribe(o=>{}):this.snkBar.open("Debe proporcionar la informaci\xf3n solicitada","Ok",{duration:3e3})}static#t=this.\u0275fac=function(o){return new(o||a)(t.Y36(v.x),t.Y36(f.g),t.Y36(g.m),t.Y36(d.ux))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-quote-doc"]],decls:12,vars:4,consts:[[1,"flex","flex-col","h-screen","bg-slate-100"],[3,"buttons"],[1,"overflow-auto","bg-white","p-2"],[3,"jsonFormData","values","result"],[1,"h-14","flex","justify-between","items-center","bg-white","border-y","border-gray-300","text-lg"],[1,"ml-2"],[1,"block","border","my-2","mr-2","p-2","hover:border-sky-900","hover:text-sky-900",3,"click"],[1,"mb-2"],[4,"ngFor","ngForOf"],[3,"condition","edit","status"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0),t._UZ(1,"app-nav-bar",1),t.TgZ(2,"div",2)(3,"app-dynamic-form",3),t.NdJ("result",function(r){return i.onGetData(r)}),t.qZA(),t.TgZ(4,"div",4)(5,"div",5),t._uU(6," Editar: Condiciones comerciales "),t.qZA(),t.TgZ(7,"span",6),t.NdJ("click",function(){return i.addCondition()}),t.TgZ(8,"mat-icon"),t._uU(9,"add"),t.qZA()()(),t._UZ(10,"div",7),t.YNc(11,D,3,2,"div",8),t.qZA()()),2&o&&(t.xp6(1),t.Q6J("buttons","100000"),t.xp6(2),t.Q6J("jsonFormData",i.settings)("values",i.sharedvar.general),t.xp6(8),t.Q6J("ngForOf",i.quote_cond_list))},dependencies:[m.sg,y.w,p.Hw,b.r,C.y]})}return a})()}];let Z=(()=>{class a{static#t=this.\u0275fac=function(o){return new(o||a)};static#e=this.\u0275mod=t.oAB({type:a});static#o=this.\u0275inj=t.cJS({imports:[h.Bz.forChild(q),h.Bz]})}return a})();var x=n(4859),Q=n(6842),T=n(2469),J=n(2355);let A=(()=>{class a{static#t=this.\u0275fac=function(o){return new(o||a)};static#e=this.\u0275mod=t.oAB({type:a});static#o=this.\u0275inj=t.cJS({imports:[m.ez,Z,T.R,p.Ps,x.ot,d.ZX,Q.N,J.z,d.ZX]})}return a})()}}]);